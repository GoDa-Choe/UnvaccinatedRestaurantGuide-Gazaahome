{% load static %}
{% load embed_video_tags %}
{% load cache %}

<!doctype html>
<html lang="ko" class="h-100">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="집에가자 전역일 계산기로 복무율과 실출근을 모두 한번에 알아보세요.">
    <meta name="author" content="Goda Soft Studio">
    <meta name="version" content="v1.3.1">

    <!-- Canonical -->
    <link rel="canonical" href="https://gazaahome.com/">

    <!-- Robots -->
    <meta name="robots" content="index,follow">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="집에가자">
    <meta property="og:description" content="집에가자 전역일 계산기로 복무율과 실출근을 모두 한번에 알아보세요.">
    <meta property="og:image" content="https://www.gazaahome.com/{% static 'home/images/logo.png' %}">
    <meta property="og:url" content="https://www.gazaahome.com/">

    <!-- Site Register -->
    <meta name="google-site-verification" content="{{ google_site_register_code }}"/>
    <meta name="naver-site-verification" content="{{ naver_site_register_code }}"/>

    <!-- Title-->
    <title>{% block head-title %}집에가자{% endblock %}</title>

    <!-- Favicon-->
    {% include 'home/favicon.html' %}

    <!-- Font Awesome-->
    <script src="https://kit.fontawesome.com/b9b1f40479.js" crossorigin="anonymous"></script>

    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="{% static 'forum/bootstrap/bootstrap.min.css' %}" rel="stylesheet" type="text/css" media="screen">

    <!-- Footer CSS style-->
    <link href="{% static 'forum/css/footer.css' %}" rel="stylesheet" type="text/css" media="screen">

    <!-- Custom styles for this template-->
    <link href="{% static 'home/css/home.css' %}" rel="stylesheet" type="text/css" media="screen">
    <link href="{% static 'home/css/features.css' %}" rel="stylesheet" type="text/css" media="screen">
    <style>
        body {
            padding-top: 5rem;
        }
    </style>
    {% block custom_style %}
    {% endblock %}


    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-203346109-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'UA-203346109-1');
    </script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7BQVYN8RMC"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'G-7BQVYN8RMC');
    </script>

    <!-- Global site tag (gtag.js) - Google Ads: 329024456 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-329024456"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'AW-329024456');
    </script>
</head>
<body class="d-flex flex-column h-100">

<div class="container">

    {% include 'forum/navbar.html' %}
    <main class="container px-0">
        {% include 'home/home_banner.html' %}

        <!-- Calcualtor -->
        {% if calculator %}
            <div class="row mb-3">

                <div class="col">
                    <h3 class="text-center my-0">군복무</h3>
                    <div class="d-flex justify-content-between align-items-end text-muted">
                        <div class="d-inline">
                            <p class="text-start my-0 small"><small>입대</small></p>
                            <p class="text-start my-0 small"><small>{{ calculator.start_date|date:'Y/m/d' }}</small></p>
                        </div>
                        <div class="d-inline">
                            <p class="text-end my-0 small"><small>전역</small></p>
                            <p class="text-end my-0 small"><small>{{ calculator.end_date|date:'Y/m/d' }}</small></p>
                        </div>
                    </div>

                    <div class="progress">
                        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
                             style="width: {{ percent }}%"
                             aria-valuenow="{{ percent }}"
                             aria-valuemin="0" aria-valuemax="100">
                            {{ percent }}%
                        </div>
                    </div>
                    <div class="d-flex justify-content-end align-items-center">
                        <p class="text-center my-0 fw-bold small">D-{{ num_remain_days }}</p>
                    </div>
                </div>

                <div class="col">
                    <h3 class="text-center my-0">실출근</h3>
                    <div class="d-flex justify-content-between align-items-end text-muted">
                        <div class="d-inline">
                            <p class="text-start my-0 small"><small>입대</small></p>
                            <p class="text-start my-0 small"><small>{{ calculator.start_date|date:'Y/m/d' }}</small></p>
                        </div>
                        <div class="d-inline">
                            <p class="text-end my-0 small"><small>막출</small></p>
                            <p class="text-end my-0 small"><small>{{ end_workday|date:'Y/m/d' }}</small></p>
                        </div>
                    </div>
                    <div class="progress">
                        <div class="progress-bar progress-bar-striped bg-success progress-bar-animated"
                             role="progressbar"
                             style="width: {{ workday_percent }}%"
                             aria-valuenow="{{ workday_percent }}"
                             aria-valuemin="0" aria-valuemax="100">
                            {{ workday_percent }}%
                        </div>
                    </div>
                    <div class="d-flex justify-content-end align-items-center">
                        <p class="text-center my-0 fw-bold small">D-{{ num_workdays }}</p>
                    </div>
                </div>
            </div>
        {% endif %}



        <div class="row mb-2">

            <!-- Videos -->
            <div class="col-md-6">
                <div class="row g-0 border rounded overflow-hidden flex-md-row mb-3 shadow-sm h-md-300 position-relative">
                    <div class="col p-4 d-flex flex-column position-static">
                        <a href="{% url 'video_forum:index' %}"
                           class="text-decoration-none d-flex justify-content-between">
                            <strong class="d-inline-block mb-2 text-success">최근 비디오</strong>
                            <small class="d-inline-block mb-2 text-muted"><small>더 알아보기</small></small>
                        </a>

                        <!-- Most Likes-->
                        {% cache 120 most_recently_videos %}
                            <div class="list-group-flush">
                                {% for video in most_recently_videos %}
                                    <a href="{% url 'video_forum:detail' video.pk %}"
                                       class="list-group-item list-group-item-action"
                                       style="border: 0">

                                        <div class="pb-3 mb-0 small lh-sm border-bottom w-100">
                                            <h3 class="h6 text-dark">{{ video.title|truncatechars:30 }}</h3>

                                            <div class="d-block">
                                                {% video video.url '100% x 160' %}
                                            </div>


                                            <div class="d-flex text-muted justify-content-between small mt-1">
                                                <div class="d-inline">

                                                    {% if video.is_anonymous %}
                                                        <strong class="text-gray-dark">익명</strong>
                                                    {% else %}
                                                        <strong class="text-gray-dark">{{ video.author }}</strong>
                                                    {% endif %}

                                                    <div class="d-inline"> {{ video.created_at|date:'m-d H:i' }} </div>
                                                </div>
                                                <div class="d-inline">
                                                    <div class="d-inline"><i
                                                            class="fas fa-heart text-danger"></i> {{ video.num_likes }}
                                                    </div>
                                                    <div class="d-inline"><i
                                                            class="far fa-comment text-success"></i> {{ video.num_comments }}
                                                    </div>
                                                    <div class="d-inline"><i
                                                            class="far fa-eye"></i> {{ video.hit_count.hits }}</div>
                                                </div>
                                            </div>
                                            <div class="d-inline small">
                                                {% if video.tags.exists %}
                                                    <i class="fas fa-tags small"></i>
                                                    {% for tag in video.tags.iterator %}
                                                        <span class="badge rounded-pill small"
                                                              style="background-color: darkseagreen">{{ tag }}</span>
                                                    {% endfor %}
                                                {% endif %}
                                            </div>
                                        </div>

                                    </a>
                                {% endfor %}
                            </div>
                        {% endcache %}
                    </div>
                </div>
            </div>

            <!-- Posts -->
            <div class="col-md-6">
                {% include 'home/home_carousel.html' %}
            </div>

        </div>


        <div class="container py-3 mb-3 rounded shadow-sm">
            <div class="row">
                <!-- Main -->
                <div class="col-md-9">

                    {% include 'home/features.html' %}

                </div>

                <!-- Side -->
                {% include 'home/home_side.html' %}

            </div>

        </div>


    </main>
</div>

{% include 'forum/footer.html' %}

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-lpyLfhYuitXl2zRZ5Bn2fqnhNAKOAaM/0Kr9laMspuaMiZfGmfwRNFh8HlMy49eQ"
        crossorigin="anonymous"></script>

</body>
</html>
